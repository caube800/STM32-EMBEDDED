#ifndef __SSD1306_TEST_H__
#define __SSD1306_TEST_H__

#include <stdbool.h>
#include <stdint.h>
#include <_ansi.h>

_BEGIN_STD_C

// --- CỜ SỰ KIỆN TOÀN CỤC ---
// 'volatile' vì chúng được thay đổi bởi ngắt
// Các hàm ngắt (trong main.c hoặc stm32l1xx_it.c) sẽ set các cờ này.
extern volatile bool g_game_tick_event;
extern volatile bool g_button_press_event;

// --- CÁC HÀM API CỦA GAME ---

/**
 * @brief Khởi tạo tất cả các biến và trạng thái của game.
 * Gọi một lần duy nhất trước khi vào vòng lặp chính.
 */
void Game_Init(void);

/**
 * @brief Xử lý sự kiện tick của game (cập nhật logic, vật lý và vẽ).
 * Hàm này nên được gọi bên trong vòng lặp main() khi cờ g_game_tick_event = true.
 * Nó sẽ tự động xóa cờ g_game_tick_event.
 */
void Game_ProcessTick(void);

/**
 * @brief Xử lý sự kiện input (nút bấm).
 * Hàm này nên được gọi liên tục bên trong vòng lặp main().
 * Nó sẽ tự động xóa cờ g_button_press_event nếu xử lý.
 */
void Game_HandleInput(void);

_END_STD_C

#endif // __SSD1306_TEST_H__
