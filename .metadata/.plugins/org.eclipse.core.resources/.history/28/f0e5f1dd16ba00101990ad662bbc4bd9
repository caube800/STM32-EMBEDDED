#ifndef __SSD1306_TEST_H__
#define __SSD1306_TEST_H__

#include <_ansi.h>
#include <stdbool.h>

_BEGIN_STD_C

extern const uint8_t trex_up_1s_bitmap[];
extern const uint8_t trex_up_1s_mask[];
extern const uint8_t trex_up_2s_bitmap[];
extern const uint8_t trex_up_2s_mask[];
extern const uint8_t trex_up_3s_bitmap[];
extern const uint8_t trex_up_3s_mask[];

extern const uint8_t cacti_big_big_bitmap[];
extern const uint8_t cacti_big_big_mask[];
extern const uint8_t cacti_small_big_bitmap[];
extern const uint8_t cacti_small_big_mask[];
extern const uint8_t heart_bitmap[];
extern const uint8_t restart_small_bitmap[];

extern volatile int is_jumping;
extern volatile int jump_velocity;  // Thêm biến này
extern volatile int ground_scroll;
extern const int gravity;  // Chỉ declare, không gán giá trị
extern const int jump_initial_velocity;
extern const int ground_speed;

typedef struct {
    uint8_t x, y;
    uint8_t w, h;
    const uint8_t *bitmap;
    const uint8_t *mask;
} Cactus_t;

#define PLAYER_SAFE_ZONE_WIDTH 32
#define SPAWN_NEW_LIVE_MIN_CYCLES 800
#define DAY_NIGHT_SWITCH_CYCLES 1000
//#define INCREASE_FPS_EVERY_N_SCORE_POINTS 200
#define LIVES_START 3
#define LIVES_MAX 5
#define TARGET_FPS_START 25
#define TARGET_FPS_MAX 55
#define GROUND_Y 57
#define GROUND_CACTI_SCROLL_SPEED 3

void ssd1306_DrawBitmap_Masked(uint8_t x, uint8_t y,const uint8_t *bitmap,const uint8_t *mask,uint8_t w, uint8_t h,uint8_t color);

void Game_Loop(void);
bool Check_Collision(uint8_t x1, uint8_t y1, uint8_t w1, uint8_t h1, uint8_t x2, uint8_t y2, uint8_t w2, uint8_t h2);
void Render_Number(uint8_t x, uint8_t y, uint16_t number);
void Render_Ground(uint8_t y);
void Render_Heart(uint8_t lives);
void Save_Hi_Score(uint16_t score);

_END_STD_C

#endif // __SSD1306_TEST_H__
